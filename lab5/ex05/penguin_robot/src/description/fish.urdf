<?xml version="1.0"?>
<robot name="fish_bot">

<link name="base_link">
    <visual>
        <origin xyz="0.0 0.0 0.01" rpy="0.0 0.0 0.0"/>
        <geometry>
            <box size="0.1 0.02 0.02"/>
        </geometry>
        <material name="blue">
            <color rgba="0.2 0.6 0.9 1.0"/>
        </material>
    </visual>
    <collision>
        <origin xyz="0.0 0.0 0.01" rpy="0.0 0.0 0.0"/>
        <geometry>
            <box size="0.1 0.02 0.02"/>
        </geometry>
    </collision>
    <inertial>
        <mass value="0.2"/>
        <origin xyz="0.0 0.0 0.01" rpy="0.0 0.0 0.0"/>
        <inertia ixx="0.00005" ixy="0.0" ixz="0.0"
                 iyy="0.00008" iyz="0.0"
                 izz="0.00005"/>
    </inertial>
</link>

<link name="head">
    <visual>
        <geometry>
            <box size="0.02 0.01 0.01"/>
        </geometry>
        <material name="blue">
            <color rgba="0.2 0.6 0.9 1.0"/>
        </material>
    </visual>
    <inertial>
        <mass value="0.01"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <inertia ixx="0.00000001" ixy="0.0" ixz="0.0"
                 iyy="0.00000001" iyz="0.0"
                 izz="0.00000001"/>
    </inertial>
</link>

<joint name="head_joint" type="fixed">
    <parent link="base_link"/>
    <child link="head"/>
    <origin xyz="0.055 0.0 0.01" rpy="0.0 0.0 0.0"/>    
</joint>

<link name="tail">
    <visual>
        <geometry>
            <box size="0.025 0.005 0.015"/>
        </geometry>
        <material name="blue">
            <color rgba="0.2 0.6 0.9 1.0"/>
        </material>
    </visual>
    <inertial>
        <mass value="0.01"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <inertia ixx="0.000000005" ixy="0.0" ixz="0.0"
                 iyy="0.000000003" iyz="0.0"
                 izz="0.000000005"/>
    </inertial>
</link>

<joint name="tail_joint" type="fixed">
    <parent link="base_link"/>
    <child link="tail"/>
    <origin xyz="-0.06 0.0 0.01" rpy="0.0 0.0 0.0"/>    
</joint>

<link name="right_fin">
    <visual>
        <geometry>
            <box size="0.05 0.005 0.01"/>
        </geometry>
        <material name="blue">
            <color rgba="0.2 0.6 0.9 1.0"/>
        </material>
    </visual>
    <inertial>
        <mass value="0.01"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <inertia ixx="0.00000001" ixy="0.0" ixz="0.0"
                 iyy="0.00000005" iyz="0.0"
                 izz="0.00000005"/>
    </inertial>
</link>

<joint name="right_fin_joint" type="fixed">
    <parent link="base_link"/>
    <child link="right_fin"/>
    <origin xyz="0 0.0125 0.01" rpy="0.0 0.0 0.0"/>    
</joint>

<link name="left_fin">
    <visual>
        <geometry>
            <box size="0.05 0.005 0.01"/>
        </geometry>
        <material name="blue">
            <color rgba="0.2 0.6 0.9 1.0"/>
        </material>
    </visual>
    <inertial>
        <mass value="0.01"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <inertia ixx="0.00000001" ixy="0.0" ixz="0.0"
                 iyy="0.00000005" iyz="0.0"
                 izz="0.00000005"/>
    </inertial>
</link>

<joint name="left_fin_joint" type="fixed">
    <parent link="base_link"/>
    <child link="left_fin"/>
    <origin xyz="0 -0.0125 0.01" rpy="0.0 0.0 0.0"/>    
</joint>

<link name="up_fin">
    <visual>
        <geometry>
            <box size="0.02 0.005 0.01"/>
        </geometry>
        <material name="blue">
            <color rgba="0.2 0.6 0.9 1.0"/>
        </material>
    </visual>
    <inertial>
        <mass value="0.005"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <inertia ixx="0.000000002" ixy="0.0" ixz="0.0"
                 iyy="0.000000003" iyz="0.0"
                 izz="0.000000003"/>
    </inertial>
</link>

<joint name="up_fin_joint" type="fixed">
    <parent link="base_link"/>
    <child link="up_fin"/>
    <origin xyz="0 0 0.02" rpy="0.0 0.0 0.0"/>    
</joint>

<link name="right_eye">
    <visual>
        <geometry>
            <box size="0.003 0.003 0.003"/>
        </geometry>
        <material name="black">
            <color rgba="0.1 0.1 0.1 1.0"/>
        </material>
    </visual>
    <inertial>
        <mass value="0.001"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <inertia ixx="0.0000000001" ixy="0.0" ixz="0.0"
                 iyy="0.0000000001" iyz="0.0"
                 izz="0.0000000001"/>
    </inertial>
</link>

<joint name="right_eye_joint" type="fixed">
    <parent link="head"/>
    <child link="right_eye"/>
    <origin xyz="0.002 0.005 0.0" rpy="0.0 0.0 0.0"/>    
</joint>

<link name="left_eye">
    <visual>
        <geometry>
            <box size="0.003 0.003 0.003"/>
        </geometry>
        <material name="black">
            <color rgba="0.1 0.1 0.1 1.0"/>
        </material>
    </visual>
    <inertial>
        <mass value="0.001"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <inertia ixx="0.0000000001" ixy="0.0" ixz="0.0"
                 iyy="0.0000000001" iyz="0.0"
                 izz="0.0000000001"/>
    </inertial>
</link>

<joint name="left_eye_joint" type="fixed">
    <parent link="head"/>
    <child link="left_eye"/>
    <origin xyz="0.002 -0.005 0.0" rpy="0.0 0.0 0.0"/>    
</joint>

<link name="right_wheel">
    <visual>
        <geometry>
            <cylinder length="0.002" radius="0.004"/>
        </geometry>
        <material name="blue">
            <color rgba="0.2 0.6 0.9 1.0"/>
        </material>
    </visual>
    <collision>
        <geometry>
            <cylinder length="0.002" radius="0.004"/>
        </geometry>
    </collision>
    <inertial>
        <mass value="0.01"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <inertia ixx="0.000000001" ixy="0.0" ixz="0.0"
                 iyy="0.000000001" iyz="0.0"
                 izz="0.000000001"/>
    </inertial>
</link>

<joint name="right_wheel_joint" type="continuous">
    <parent link="base_link"/>
    <child link="right_wheel"/>
    <origin xyz="-0.03 -0.011 0.004" rpy="1.57079633  0 0"/>
    <axis xyz="0 0 1"/>
    <limit effort="10000.0" velocity="10000.0"/>
    <dynamics damping="0.00001" friction="0.00001"/>    
</joint>

<link name="left_wheel">
    <visual>
        <geometry>
            <cylinder length="0.002" radius="0.004"/>
        </geometry>
        <material name="blue">
            <color rgba="0.2 0.6 0.9 1.0"/>
        </material>
    </visual>
    <collision>
        <geometry>
            <cylinder length="0.002" radius="0.004"/>
        </geometry>
    </collision>
    <inertial>
        <mass value="0.01"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <inertia ixx="0.000000001" ixy="0.0" ixz="0.0"
                 iyy="0.000000001" iyz="0.0"
                 izz="0.000000001"/>
    </inertial>
</link>

<joint name="left_wheel_joint" type="continuous">
    <parent link="base_link"/>
    <child link="left_wheel"/>
    <origin xyz="-0.03 0.011 0.004" rpy="1.57079633 0 0"/>
    <axis xyz="0 0 1"/>
</joint>

<link name="caster">
    <visual>
        <geometry>
            <sphere radius="0.004"/>
        </geometry>
        <material name="blue">
            <color rgba="0.2 0.6 0.9 1.0"/>
        </material>
    </visual>
    <collision>
        <geometry>
            <sphere radius="0.004"/>
        </geometry>
    </collision>
    <inertial>
        <mass value="0.005"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <inertia ixx="0.0000000005" ixy="0.0" ixz="0.0"
                 iyy="0.0000000005" iyz="0.0"
                 izz="0.0000000005"/>
    </inertial>
</link>

<joint name="caster_joint" type="fixed">
    <parent link="base_link"/>
    <child link="caster"/>
    <origin xyz="0.03 0 0.004" rpy="0 0 0"/>
</joint>

<gazebo reference="caster_joint">
    <preserveFixedJoint>true</preserveFixedJoint>
</gazebo>
<gazebo reference="head_joint">
    <preserveFixedJoint>true</preserveFixedJoint>
</gazebo>
<gazebo reference="left_fin_joint">
    <preserveFixedJoint>true</preserveFixedJoint>
</gazebo>
<gazebo reference="right_fin_joint">
    <preserveFixedJoint>true</preserveFixedJoint>
</gazebo>
<gazebo reference="tail_joint">
    <preserveFixedJoint>true</preserveFixedJoint>
</gazebo>
<gazebo reference="up_fin_joint">
    <preserveFixedJoint>true</preserveFixedJoint>
</gazebo>
<gazebo reference="right_eye_joint">
    <preserveFixedJoint>true</preserveFixedJoint>
</gazebo>
<gazebo reference="left_eye_joint">
    <preserveFixedJoint>true</preserveFixedJoint>
</gazebo>

<gazebo reference="caster">
    <mu1>0.0000000001</mu1>
    <mu2>0.0000000001</mu2>
</gazebo>

<gazebo>
    <plugin
      filename="gz-sim-diff-drive-system"
      name="gz::sim::systems::DiffDrive">
      <left_joint>left_wheel_joint</left_joint>
      <right_joint>right_wheel_joint</right_joint>
      <wheel_separation>0.022</wheel_separation>
      <wheel_radius>0.004</wheel_radius>
      <odom_publish_frequency>50</odom_publish_frequency>
      <topic>fish/cmd_vel</topic>
      <odom_topic>fish/odom</odom_topic>
      <frame_id>fish/odom</frame_id>
      <child_frame_id>fish/base_link</child_frame_id>
    </plugin>
    <plugin
        filename="gz-sim-joint-state-publisher-system"
        name="gz::sim::systems::JointStatePublisher">
        <topic>joint_states</topic>
        <joint_name>left_wheel_joint</joint_name>
        <joint_name>right_wheel_joint</joint_name>
    </plugin>
</gazebo>

</robot>
